{
	"info": {
		"_postman_id": "db652e24-dd50-461b-9b5a-b27ba0e96014",
		"name": "Schindler Migration - Main",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "https://api.stage.onbuildingminds.com/api/masterdata/premises/buildings/buildingGUID",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Response address should match the csv address with resolution status, resolvedSuccessfully\", () => {",
							"    pm.response.to.be.ok;",
							"    pm.response.to.be.withBody;",
							"    pm.response.to.be.json;",
							"",
							"    const responseJson = pm.response.json();",
							"    //csv -> street; since every valid address will have a street",
							"    const iterationStreet = pm.iterationData.get('Street')",
							"    //check if there is no address from csv",
							"",
							"    if(iterationStreet === 'NULL'){",
							"        // console.log(`There is no valid address from the CSV`)",
							"        // check if there is address in the response",
							"        pm.expect(responseJson).to.not.have.property('addresses', 'The address does not exist on csv and DB');",
							"        // console.log('This is NULL')",
							"        postman.setNextRequest(null)",
							"        ",
							"    }",
							"    //console.log('address', responseJson.addresses ? true : false)",
							"else{",
							"",
							"    pm.expect(responseJson.addresses).to.have.lengthOf(1);",
							"    const address = responseJson.addresses[0];",
							"",
							"    pm.expect(address).to.have.own.property('resolutionStatus');",
							"    pm.expect(address.resolutionStatus).to.equal(\"resolvedSuccessfully\", `The resolution status of the address of the site with ID ${responseJson.id} is: ${address.resolutionStatus})`);",
							"}",
							"",
							"",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "authority",
						"value": "api.stage.onbuildingminds.com"
					},
					{
						"key": "sec-ch-ua",
						"value": "\"Google Chrome\";v=\"89\", \"Chromium\";v=\"89\", \";Not A Brand\";v=\"99\""
					},
					{
						"key": "accept",
						"value": "application/json, text/plain, */*"
					},
					{
						"key": "authorization",
						"value": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IkEyU1Vkc3VDQXJEVkxKTXItaFlFQnI5ZURUeU9BRnF4Sng3ajBNRTI2cHcifQ.eyJleHAiOjE2MTkwMTk0NTIsIm5iZiI6MTYxOTAxNTg1MiwidmVyIjoiMS4wIiwiaXNzIjoiaHR0cHM6Ly9zdGdidWlsZGluZ21pbmRzLmIyY2xvZ2luLmNvbS82ZjQxMDQ3OS1iMDM3LTRhNmEtYjlhMC0xZGJlYmY4NTYyYmMvdjIuMC8iLCJzdWIiOiJlYzM5Y2IwOC0zMDkxLTQ4MDgtYjU0NC1kYzdmMGRiMTBkMGIiLCJhdWQiOiI5ZGQ5NDZjZS04MDJjLTRmODktYWNkMS0yYzI2N2FlNmUxMjciLCJhY3IiOiJiMmNfMWFfc2lnbmluY29tbW9uIiwibm9uY2UiOiIxZGM4OGU4NS0yNTMxLTQ2YzYtYWI1MS05MzllODgwMGQzNjciLCJpYXQiOjE2MTkwMTU4NTIsImF1dGhfdGltZSI6MTYxOTAxNTg1MiwibmFtZSI6IkplZmYtRnJhbmNpcyBPZm9hcm8iLCJpZHAiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vMzQ3MDQ3MmQtMTE3ZC00ZjNkLTljZTktMDcyNjE4MGY4ZjYxL3YyLjAiLCJvdGhlck1haWxzIjpbImplZmYtZnJhbmNpcy5vZm9hcm9AYnVpbGRpbmdtaW5kcy5jb20iXSwiZ2l2ZW5fbmFtZSI6IkplZmYiLCJmYW1pbHlfbmFtZSI6IkZyYW5jaXMiLCJ0aWQiOiJjMTdiOGY3MC04Mzc4LTQ2NGYtYmU5YS01YjM4YWIxZjBhZmEiLCJlbWFpbCI6ImplZmYtZnJhbmNpcy5vZm9hcm9AYnVpbGRpbmdtaW5kcy5jb20iLCJvaWQiOiJlM2Q0MGI0NC02ZWM3LTQyODktYWNmZS1lYzZlNTQ4MzVjOWIiLCJyb2xlcyI6WyJCTUNMLkRvY3VtZW50cy5Xcml0ZXIiLCJCTUNMLkVxdWlwbWVudHMuV3JpdGVyIiwiQk1DTC5BY3Rpdml0aWVzLldyaXRlciIsIkJNQ0wuRG9jdW1lbnRzLlJlYWRlciIsIkJNQ0wuU3BhY2VzLldyaXRlciIsIkJNQ0wuRXF1aXBtZW50cy5SZWFkZXIiLCJCTUNMLkFjdGl2aXRpZXMuUmVhZGVyIl0sImlzQWN0aXZlIjp0cnVlfQ.mW9hnpj9t979QwecAAS4HvDFJ2zTx9BjH2I2Af6oNVlF8LG0ZZM0Y1TBdq4TPgeCawHJW7BzSlhlG-idtvlQJRWQ6LaqgqTmok9MCmfoVEDsK8Xmbdzjd4A0ehdOC9ImHZoyKyFHglzOnHzYxQNMBL5kOV33BBhDLWEqk0BubJ2wRj8rcDkZ8XDrN68ARgJMNzRicYHV-QUaKZy1lEsiVMznkckkAOA4OMqYgFaapsNqpmNNsB6Nc_CoTonyICkE7mNw3FXy2Xz3Tn-5-99gIkVUyKiSDXnfnWDMPRYmKZTmkaaB-WTBYBcUs3q51irUxHNicXPvTCNQ8vVPSoWV5A"
					},
					{
						"key": "request-id",
						"value": "|5f1e8e53f6f5409e9832d580c4d31e83.99d182c9690244ae"
					},
					{
						"key": "sec-ch-ua-mobile",
						"value": "?0"
					},
					{
						"key": "user-agent",
						"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36"
					},
					{
						"key": "origin",
						"value": "https://cloud.stage.onbuildingminds.com"
					},
					{
						"key": "sec-fetch-site",
						"value": "same-site"
					},
					{
						"key": "sec-fetch-mode",
						"value": "cors"
					},
					{
						"key": "sec-fetch-dest",
						"value": "empty"
					},
					{
						"key": "referer",
						"value": "https://cloud.stage.onbuildingminds.com/"
					},
					{
						"key": "accept-language",
						"value": "en,en-GB;q=0.9,en-US;q=0.8,de-DE;q=0.7,de;q=0.6"
					}
				],
				"url": {
					"raw": "https://api.stage.onbuildingminds.com/api/masterdata/premises/buildings/{{BuildingGuid}}",
					"protocol": "https",
					"host": [
						"api",
						"stage",
						"onbuildingminds",
						"com"
					],
					"path": [
						"api",
						"masterdata",
						"premises",
						"buildings",
						"{{BuildingGuid}}"
					]
				}
			},
			"response": []
		}
	]
}